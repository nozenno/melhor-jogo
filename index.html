<!DOCTYPE html>
<html>
<head>
  <meta charset="UTF-8">
  <title>Ranking de Jogos</title>
  <style>
    body { font-family: Arial, sans-serif; text-align: center; }
    .game { margin: 20px; }
    button { margin-left: 10px; }
  </style>
</head>
<body>
  <h1>Ranking dos Melhores Jogos</h1>
  <div id="ranking">
    <div class="game">
      Need For Speed: Most Wanted - Votos: <span id="Need_For_Speed_Most_Wanted">0</span>
      <button onclick="vote('Need_For_Speed_Most_Wanted')">Votar</button>
    </div>
    <div class="game">
      Final Fantasy 7 - Votos: <span id="Final_Fantasy_7">0</span>
      <button onclick="vote('Final_Fantasy_7')">Votar</button>
    </div>
    <div class="game">
      GTA 5 - Votos: <span id="GTA_5">0</span>
      <button onclick="vote('GTA_5')">Votar</button>
    </div>
    <div class="game">
      GTA: San Andreas - Votos: <span id="GTA_San_Andreas">0</span>
      <button onclick="vote('GTA_San_Andreas')">Votar</button>
    </div>
    <div class="game">
      Half-Life 1 - Votos: <span id="Half_Life_1">0</span>
      <button onclick="vote('Half_Life_1')">Votar</button>
    </div>
    <div class="game">
      Half-Life 2 - Votos: <span id="Half_Life_2">0</span>
      <button onclick="vote('Half_Life_2')">Votar</button>
    </div>
    <div class="game">
      Portal - Votos: <span id="Portal">0</span>
      <button onclick="vote('Portal')">Votar</button>
    </div>
    <div class="game">
      Portal 2 - Votos: <span id="Portal_2">0</span>
      <button onclick="vote('Portal_2')">Votar</button>
    </div>
    <div class="game">
      Resident Evil 4 - Votos: <span id="Resident_Evil_4">0</span>
      <button onclick="vote('Resident_Evil_4')">Votar</button>
    </div>
    <div class="game">
      Resident Evil 5 - Votos: <span id="Resident_Evil_5">0</span>
      <button onclick="vote('Resident_Evil_5')">Votar</button>
    </div>
  </div>

  <script>
    async function vote(jogo) {
      console.log("Tentando votar em:", jogo); // <-- log de teste
      try {
        const res = await fetch("/api/votar", {
          method: "POST",
          headers: { "Content-Type": "application/json" },
          body: JSON.stringify({ jogo })
        });
        const data = await res.json();

        for (const key in data) {
          const span = document.getElementById(key);
          if (span) span.textContent = data[key];
        }
      } catch (err) {
        console.error(err);
      }
    }
  </script>
</body>
</html>